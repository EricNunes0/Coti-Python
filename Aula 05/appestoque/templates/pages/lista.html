{% extends 'pages/base.html' %}
{% block main_content %}
<p style="text-align:center;margin:16px 0;">Listagem de produtos cadastrados:</p>
{% if produtos or produtos|length > 0 %}
    <table width="100%" bordercolor="#888" class="table table-bordered table-striped table-dark table-sm">
        <thead>
            <tr>
                <th>Código</th>
                <th>Nome</th>
                <th>Preço</th>
                <th>Quantidade</th>
                <th>Operações</th>
            </tr>
        </thead>
        <tbody>
            {% for produto in produtos %}
                <tr align="center">
                    <td>{{produto.codigo}}</td>
                    <td>{{produto.nome}}</td>
                    <td>{{produto.preco}}</td>
                    <td>{{produto.quantidade}}</td>
                    <td style="display:flex;justify-content:center;align-items:center;gap:10px;border-width: 0px;">
                        <a class="btn btn-danger btn-sm" href="{% url 'estoque:excluir' codigo=produto.codigo %}" onclick="return window.confirm('Deseja realmente excluir?');">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none">
                                <path d="M6 7V18C6 19.1046 6.89543 20 8 20H16C17.1046 20 18 19.1046 18 18V7M6 7H5M6 7H8M18 7H19M18 7H16M10 11V16M14 11V16M8 7V5C8 3.89543 8.89543 3 10 3H14C15.1046 3 16 3.89543 16 5V7M8 7H16" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Excluir</span>
                        </a>
                        <a class="btn btn-warning btn-sm" href="{% url 'estoque:alterar' codigo=produto.codigo %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
                                <g style="transform: scale(0.9) translate(2px, 1px);">
                                    <g>
                                        <g>
                                            <path d="M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                            <polygon fill="none" points="12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                        </g>
                                    </g>
                                </g>
                            </svg>
                            <span>Alterar</span>
                        </a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Não há produtos cadastrados.</p>
{% endif %}
{% if msg %}
    <script>
        alert('{{ msg }}');
    </script>
{% endif %}
{% endblock %}